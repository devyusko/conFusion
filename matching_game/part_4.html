<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Matching Game: Part 4</title>
    <style>
        #rightSide {
            left: 500px;
            border-left: 1px solid black
        }

        img {
            position: absolute;
        }

        div {
            position: absolute;
            width: 500px;
            height: 500px;
        }
    </style>
</head>
<body id='theBody' onload='generateFaces()'>
<script>
    var numberOfFaces = 5;
    function generateFaces() {

        var theBody = document.getElementsByTagName('body')[0];
        var theLeftSide = document.getElementById('leftSide');
        var theRightSide = document.getElementById('rightSide');
        for (var i = 0; i < numberOfFaces; i++ ) {
            var smiley_img = document.createElement('img');
            smiley_img.src = 'http://home.cse.ust.hk/~rossiter/mooc/matching_game/smile.png';
            var topPosition = Math.floor(Math.random() * 400);
            var leftPosition = Math.floor(Math.random() * 400);

            smiley_img.style.top = topPosition + 'px';
            smiley_img.style.left = leftPosition + 'px';
            theLeftSide.appendChild(smiley_img);
        }

        theLeftSide.lastChild.onclick = function nextLevel(event) {
            while(theLeftSide.firstChild) {
                theLeftSide.removeChild(theLeftSide.firstChild);
            }

            while(theRightSide.firstChild) {
                theRightSide.removeChild(theRightSide.firstChild);
            }

            event.stopPropagation();
            numberOfFaces += 5;
            generateFaces();
        };

        var leftSideImages = theLeftSide.cloneNode(true);
        leftSideImages.removeChild(leftSideImages.lastChild);
        theRightSide.appendChild(leftSideImages);

        theBody.onclick = function gameOver() {
            alert('Game Over!');
            theBody.onclick = null;
            theLeftSide.lastChild.onclick = null;
        };
    }
</script>
<h1>Matching Game</h1>

<p>Click on the extra smiling face on the left</p>

<div id='leftSide'></div>

<div id='rightSide'></div>

</body>
</html>